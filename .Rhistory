setwd("/Users/jessica/Documents/syph_model-master-2")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_interv_code.R")
source("Model_code/syph_model_interv_code.R")
source("Model_code/syph_model_interv_code.R")
View(prev.end)
View(prev.out)
View(prev.out)
source("Model_code/syph_model_interv_code.R")
View(prev.end)
View(prev.end)
View(prev.end)
source("Model_code/syph_model_interv_code.R")
View(pred)
View(pred$prev)
View(pred$prev$p.diag.early)
View(pred$prev["p.diag.early"])
lapply(pred$prev, function(x) x[['p.diag.msm']])
View(lapply(pred$prev, function(x) x[['cum.inc.m']]))
View(lapply(pred$prev, function(x) x[['cum.inc.m']])[[1]])
View(unlist(lapply(pred$prev, function(x) x[['cum.inc.m']])))
prev.out <- as.data.frame(cbind(run=rep(1:max(unlist(pred$iter)),each=17*n.interv),year=rep(1999:2016, n.interv),interv=rep(unlist(pred$interv),each=17), Male=unlist(lapply(pred$prev, function(x) x[['cum.inc.m']])), Female=unlist(lapply(pred$prev, function(x) x[['cum.inc.f']])), MSM=unlist(lapply(pred$prev, function(x) x[['cum.inc.msm']]))))
View(prev.out)
prev.end <- subset(prev.out, year==2016)
View(prev.end)
for(q in 1:max(prev.end$run)) {
for (w in 1:max(prev.end$interv)) {
prev.end$pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.f[(q-1)*n.interv +w] <- 100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
}
}
max(prev.end$run)
max(prev.end$interv)
q
w
100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + 1]) / prev.end$Male[(q-1)*n.interv + interv.comp]
q <- 2
100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + 1]) / prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$Male[(q-1)*n.interv + 1]
View(prev.end$Male)
n.interv
interv.comp
(q-1)*n.interv + interv.comp
prev.end$Male[7]
q <- 3
100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + 1]) / prev.end$Male[(q-1)*n.interv + interv.comp]
w <- 2
100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + 1]) / prev.end$Male[(q-1)*n.interv + interv.comp]
100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + 2]) / prev.end$Male[(q-1)*n.interv + interv.comp]
w <- 6
100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
View(prev.end$MSM)
100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
(q-1)*n.interv +1
(q-1)*n.interv +2
(q-1)*n.interv +3
(q-1)*n.interv +4
q <- 1
(q-1)*n.interv +1
source("Model_code/syph_model_interv_code.R")
for(q in 1:max(prev.end$run)) {
for (w in 1:max(prev.end$interv)) {
pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
pct.avert.f[(q-1)*n.interv +w] <- 100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
}
}
q <- 1
w <- 1
pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
View(prev.end$Male)
View(prev.out)
prev.end <- subset(prev.out, year==2016)
View(prev.end)
View(prev.out)
View(pred)
View(pred$prev)
prev.out <- as.data.frame(cbind(run=rep(1:max(unlist(pred$iter)),each=18*n.interv),year=rep(1999:2016, n.interv),interv=rep(unlist(pred$interv),each=18), Male=unlist(lapply(pred$prev, function(x) x[['cum.inc.m']])), Female=unlist(lapply(pred$prev, function(x) x[['cum.inc.f']])), MSM=unlist(lapply(pred$prev, function(x) x[['cum.inc.msm']]))))
View(prev.out)
prev.end <- subset(prev.out, year==2016)
View(prev.end)
for(q in 1:max(prev.end$run)) {
for (w in 1:max(prev.end$interv)) {
prev.end$pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.f[(q-1)*n.interv +w] <- 100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
}
}
View(prev.end)
source("Model_code/syph_model_interv_code.R")
View(prev.end$Male)
test <- zeros(60,1)
test <- matrix(0,60,1)
View(test)
pct.avert.m <- matrix(0,60,1)
pct.avert.f <- matrix(0,60,1)
pct.avert.msm <- matrix(0,60,1)
prev.end$pct.avert.m <- pct.avert.m
prev.end$pct.avert.f <- pct.avert.f
prev.end$pct.avert.msm <- pct.avert.msm
View(prev.end)
for(q in 1:max(prev.end$run)) {
for (w in 1:max(prev.end$interv)) {
prev.end$pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.f[(q-1)*n.interv +w] <- 100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
}
}
q <- 1
w <- 1
prev.end$pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.f[(q-1)*n.interv +w] <- 100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
q <- 10
w <- 6
prev.end$pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.f[(q-1)*n.interv +w] <- 100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
View(prev.end)
source("Model_code/syph_model_interv_code.R")
q
source("Model_code/syph_model_interv_code.R")
View(prev.end)
for(v in 1:max(prev.end$run)) {
for (w in 1:max(prev.end$interv)) {
prev.end$pct.avert.m[(q-1)*n.interv +w] <- 100*(prev.end$Male[(q-1)*n.interv + interv.comp] - prev.end$Male[(q-1)*n.interv + w]) / prev.end$Male[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.f[(q-1)*n.interv +w] <- 100*(prev.end$Female[(q-1)*n.interv + interv.comp] - prev.end$Female[(q-1)*n.interv + w]) / prev.end$Female[(q-1)*n.interv + interv.comp]
prev.end$pct.avert.msm[(q-1)*n.interv +w] <- 100*(prev.end$MSM[(q-1)*n.interv + interv.comp] - prev.end$MSM[(q-1)*n.interv + w]) / prev.end$MSM[(q-1)*n.interv + interv.comp]
}
}
source("Model_code/syph_model_interv_code.R")
View(prev.end)
source("Model_code/syph_model_interv_code.R")
View(prev.end)
prev.end$Intervention <- factor(prev.end$interv, labels=interv.names)
View(prev.end)
prev.end <- subset(prev.end, (interv!=interv.comp & (variable == "pct.avert.m"| variable=="pct.avert.f" | variable=="pct.avert.msm")), select = -c(year))
source("Model_code/syph_model_interv_code.R")
View(prev.end)
prev.end$Intervention <- factor(prev.end$interv, labels=interv.names)
View(prev.end)
prev.out <- melt(prev.out, id.vars=c("year","run","interv" ))
View(prev.out)
prev.out$Intervention <- factor(prev.out$interv, labels=interv.names)
View(prev.out)
grouped <- group_by(prev.out, variable, interv, Intervention, year)
prev.out <- subset(prev.out, variable!="MSM")  #plot only M and F
View(prev.out)
grouped <- group_by(prev.out, variable, interv, Intervention)
inc.out <- as.data.frame(cbind(run=rep(1:max(unlist(pred$iter)),each=17*n.interv) ,year=rep(1999:2015, n.interv), interv=rep(unlist(pred$interv), each=17), Male=unlist(pred$inc.m), Female=unlist(pred$inc.f), MSM=unlist(pred$inc.msm)))
inc.out <- as.data.frame(cbind(run=rep(1:max(unlist(pred$iter)),each=18*n.interv) ,year=rep(1999:2016, n.interv), interv=rep(unlist(pred$interv), each=18), Male=unlist(pred$inc.m), Female=unlist(pred$inc.f), MSM=unlist(pred$inc.msm)))
inc.out <- melt(inc.out, id.vars=c("year","run", "interv"))
View(inc.out)
inc.out <- as.data.frame(cbind(run=rep(1:max(unlist(pred$iter)),each=18*n.interv) ,year=rep(1999:2016, n.interv), interv=rep(unlist(pred$interv), each=18), Male=unlist(pred$inc.m), Female=unlist(pred$inc.f), MSM=unlist(pred$inc.msm)))
View(inc.out)
inc.out$Intervention <- factor(inc.out$interv, labels=interv.names)
View(inc.out)
source("Model_code/syph_model_interv_code.R")
View(pred)
View(pred.prev)
View(pred)
View(pred$prev)
View(pred)
source("Model_code/syph_model_interv_code.R")
View(inc.age.sex)
View(inc.s.a)
View(inc)
interv.start
interv.end
source("Model_code/syph_model_interv_code.R")
View(prev.msm)
View(cum.prev.msm)
View(cum.inc.msm)
source("Model_code/syph_model_interv_code.R")
View(prev.msw)
cum.prev.msw
cum.prev.f
cum.prev.msm
View(prev.total)
View(rowSums(inf.total[,m1])/sum(n.i[m1]))
View(rowSums(inf.total[,m5])/sum(n.i[m5]))
source("Model_code/syph_model_interv_code.R")
View(prev.total)
View(rowSums(inf.total[,f1])/sum(n.i[f1]))
View(rowSums(inf.total[,f2])/sum(n.i[f2]))
source("Model_code/syph_model_interv_code.R")
View(prev.msw)
View(prev.f)
cum.prev.msw
cum.prev.f
cum.prev.msm
source("Model_code/syph_model_interv_code.R")
source("Model_code/syph_model_interv_code.R")
View(p.msm.end)
View(p.msm.end)
View(p.msm.out)
View(prev.end)
View(pred$prev)
source("Model_code/syph_model_interv_code.R")
View(prev.m)
cum.prev.m
sum(prev.m[(interv.start:interv.end)])
cum.prev.f
cum.prev.msm
cum.prev.msw
(cum.prev.m-cum.prev.msw)-cum.prev.msm
source("Model_code/syph_model_interv_code.R")
View(inc)
View(inc.s.a)
males
females
msw
View(prev.m)
source("Model_code/syph_model_interv_code.R")
source("Model_code/syph_model_interv_code.R")
View(p.msm.end)
source("Model_code/syph_model_interv_code.R")
View(p.msm.out)
View(pred.prev)
View(pred$prev)
View(p.msm.end)
p.msm.out <- melt(p.msm.out, id.vars=c("year","run", "interv"))
p.msm.out$Intervention <- factor(p.msm.out$interv, labels=interv.names)
p.msm.end <- melt(p.msm.end, id.vars=c("year","run", "interv"))
p.msm.end$Intervention <- factor(p.msm.end$interv, labels=interv.names)
View(p.msm.out)
grouped <- group_by(p.msm.end, variable, interv, Intervention)
p.msm.end.inc <- subset(p.msm.end[,2:6], variable=="Incident cases")
View(p.msm.end.inc)
p.msm.end.inc <- subset(p.msm.end.inc, select=-variable)
View(p.msm.end.inc)
names(p.msm.end.inc)[names(p.msm.end.inc)=="value"] <- "p.msm"
msm.inc<-merge(p.msm.end.inc, cum.inc.avert.all)
p.msm.end.inc.pct <- subset(p.msm.end[,2:6], variable=="inc.pct.avert")
p.msm.end.inc.pct <- subset(p.msm.end.inc.pct, select=-variable)
names(p.msm.end.inc.pct)[names(p.msm.end.inc.pct)=="value"] <- "p.msm.pct"
msm.inc.pct<-merge(p.msm.end.inc.pct, cum.inc.avert.all)
plot.p.msm.best <- ggplot(data=subset(p.msm.out, (interv==3 & variable=="Incident cases" & year >=2011)), aes(x=year, y=value)) +
stat_summary( aes(colour=variable, fill=variable), geom="smooth",
fun.y="mean",
fun.ymin = function(z) {quantile(z,0.025)},
fun.ymax = function(z) {quantile(z,0.975)}) +
coord_cartesian(ylim=c(0,1)) +
labs(x="Year", y="Proportion of incident male cases in MSM\n") +
theme_classic()+
theme(legend.position="none",  axis.text.x=element_text(angle=0,hjust=0.5,size=10),axis.text.y=element_text(size=10),
plot.title=element_text(size=16, hjust=0),
axis.line.x = element_line(colour = 'black', size=0.5, linetype='solid'),
axis.line.y = element_line(colour = 'black', size=0.5, linetype='solid')) +
ggtitle("C")
plot.p.msm.best
View(plot.p.msm.best)
View(plot.p.msm.best)
plot.inc.age.1 <- ggplot(data=subset(inc.age.out, (interv==3 & year>=2011)), aes(x=year, y=value*100, group=variable)) +
stat_summary(aes(colour=Age,fill=Age), geom="smooth",
fun.y="mean",
fun.ymin = function(z) {quantile(z,0.025)},
fun.ymax = function(z) {quantile(z,0.975)}) +
facet_grid(.~Sex) +
coord_cartesian(ylim=c(0,4)) +
labs(x="Year", y="Syphilis incidence (%)\n") +
theme_classic() +
theme(legend.position="right", legend.title=element_blank(), axis.text.x=element_text(angle=0,hjust=0.5,size=10),axis.text.y=element_text(size=10),
plot.title=element_text(size=16, hjust=0),
panel.spacing = unit(1, "lines"),
axis.line.x = element_line(colour = 'black', size=0.5, linetype='solid'),
axis.line.y = element_line(colour = 'black', size=0.5, linetype='solid')) +
scale_fill_manual(values=cols[6:7])+
scale_color_manual(values=cols[6:7])+
ggtitle("B")
View(inc.out)
source("Model_code/syph_model_interv_code.R")
source("Model_code/syph_model_interv_code.R")
View(inc.age.out)
inc.age.out <- as.data.frame(cbind(run=rep(1:max(unlist(pred$iter)),each=18*n.interv) ,year=rep(1999:2016, n.interv), interv=rep(unlist(pred$interv), each=18), "Male 20-44y"=unlist(lapply(pred$prev, function(x) x[['inc.y.m']])), "Female 20-44y"=unlist(lapply(pred$prev, function(x) x[['inc.y.f']])), "Male 45-64y"=unlist(lapply(pred$prev, function(x) x[['inc.o.m']])), "Female 45-64y"=unlist(lapply(pred$prev, function(x) x[['inc.o.f']]))))
View(inc.age.out)
View(pred$prev)
inc.out$Sex <- relevel(inc.out$variable, "Female")
plot.inc.best <- ggplot(data=subset(inc.out, (interv==3 & year>=2011)), aes(x=year, y=value*100, group=Sex)) +
stat_summary(aes(colour=Sex,fill=Sex), geom="smooth",
fun.y="mean",
fun.ymin = function(z) {quantile(z,0.025)},
fun.ymax = function(z) {quantile(z,0.975)}) +
coord_cartesian(ylim=c(0,4)) +
labs(x="Year", y="Syphilis incidence (%)\n\n") +
theme_classic() +
theme(legend.title=element_blank(), axis.text.x=element_text(angle=0,hjust=0.5,size=10),axis.text.y=element_text(size=10),
plot.title=element_text(size=16, hjust=0),
legend.justification = c(1, 1), legend.position = c(1, 1),
axis.line.x = element_line(colour = 'black', size=0.5, linetype='solid'),
axis.line.y = element_line(colour = 'black', size=0.5, linetype='solid')) +
ggtitle("A")
View(inc.out)
inc.out <- as.data.frame(cbind(run=rep(1:max(unlist(pred$iter)),each=18*n.interv) ,year=rep(1999:2016, n.interv), interv=rep(unlist(pred$interv), each=18), Male=unlist(lapply(pred$prev, function(x) x[['inc.m']])), Female=unlist(lapply(pred$prev, function(x) x[['inc.f']])), MSM=unlist(lapply(pred$prev, function(x) x[['inc.msm']]))))
View(inc.out)
inc.out <- melt(inc.out, id.vars=c("year","run", "interv"))
View(inc.out)
inc.out$Intervention <- factor(inc.out$interv, labels=interv.names)
View(inc.out)
inc.out$Sex <- relevel(inc.out$variable, "Female")
View(inc.out)
plot.inc.best <- ggplot(data=subset(inc.out, (interv==3 & year>=2011)), aes(x=year, y=value*100, group=Sex)) +
stat_summary(aes(colour=Sex,fill=Sex), geom="smooth",
fun.y="mean",
fun.ymin = function(z) {quantile(z,0.025)},
fun.ymax = function(z) {quantile(z,0.975)}) +
coord_cartesian(ylim=c(0,4)) +
labs(x="Year", y="Syphilis incidence (%)\n\n") +
theme_classic() +
theme(legend.title=element_blank(), axis.text.x=element_text(angle=0,hjust=0.5,size=10),axis.text.y=element_text(size=10),
plot.title=element_text(size=16, hjust=0),
legend.justification = c(1, 1), legend.position = c(1, 1),
axis.line.x = element_line(colour = 'black', size=0.5, linetype='solid'),
axis.line.y = element_line(colour = 'black', size=0.5, linetype='solid')) +
ggtitle("A")
View(plot.inc.best)
plot(subset(inc.out, (interv==3 & year>=2011)))
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
View(screen)
setwd("/Users/jessica/Documents/syph_model-master-3/")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
setwd("/Users/jessica/Documents/syph_model-master-2")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
getwd()
setwd("/Users/jessica/Documents/syph_model-master-2")
setwd("/Users/jessica/Documents/syph_model-master-3")
setwd("/Users/jessica/Documents/syph_model-master-2")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
setwd("/Users/jessica/Documents/syph_model-master-3")
setwd("/Users/jessica/Documents/syph_model-master-3")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
View(screen)
source("Model_code/syph_model_main_code.R")
View(screen)
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
View(pred)
View(pred$prev)
View(pred$prev.early.inf.rate.m1)
getwd()
View(pred)
source("Model_code/syph_model_main_code.R")
tidy_prevalence_by_demographic(sol)
source("prevalence.plotting.R")
getwd()
source("Model_code/prevalence.plotting.R")
tidy_prevalence_by_demographic(sol)
View(sol)
source("Model_code/syph_model_main_code.R")
View(prev)
source("Model_code/syph_model_main_code.R")
source("Model_code/prevalence.plotting.R")
tidy_prevalence_by_demographic(sol)
source("Model_code/syph_model_main_code.R")
source("Model_code/prevalence.plotting.R")
tidy_prevalence_dfs_for_many_simulations(post.sample)
tidy_prevalence_dfs_for_many_simulations(post.sample$outputs)
source("Model_code/syph_model_main_code.R")
source("Model_code/prevalence.plotting.R")
tidy_prevalence_dfs_for_many_simulations(post.sample$outputs)
source("Model_code/syph_model_main_code.R")
source("Model_code/prevalence.plotting.R")
tidy_prevalence_dfs_for_many_simulations(post.sample$outputs)
tidy_prevalence_dfs_for_many_simulations(post.sample$outputs)
sol_list <- list()
for (i in 1:nrow(trace_sample)) {
theta <- setNames(as.numeric(trace_sample[i, ]), colnames(trace_sample))
#prediction.epi(theta, interv=interv)
prediction.epi(theta)
sol_list[[length(sol_list)+1]] <- sol
}
for (i in 1:nrow(post.sample)) {
theta <- setNames(as.numeric(post.sample[i, ]), colnames(post.sample))
#prediction.epi(theta, interv=interv)
prediction.epi(theta)
sol_list[[length(sol_list)+1]] <- sol
}
source("Model_code/syph_model_main_code.R")
pred <- as.data.frame(post.sample$outputs)
sol_list <- list()
for (i in 1:nrow(pred)) {
theta <- setNames(as.numeric(pred[i, ]), colnames(pred))
#prediction.epi(theta, interv=interv)
prediction.epi(theta)
sol_list[[length(sol_list)+1]] <- sol
}
colnames(pred)
View(as.numeric(pred[1,]))
??setNames
tidy_prevalence_dfs_for_many_simulations(trace)
source("Model_code/syph_model_main_code.R")
View(head(outputs))
View(head(colnames(trace)))
View(colnames(trace))
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
View(out.prev.y.m.3)
View(out.inc.y.m.3)
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
View(out.prev.y.msmhiv-out.prev.y.msmhiv.cf)
View(out.prev.y.msmhiv$value-out.prev.y.msmhiv.cf$value)
View(out.inc.y.msmhiv$value-out.inc.y.msmhiv.cf$value)
test1 <-melt(100*as.matrix(subset(pred, select=(prev.cf.prev.total1+cal.period):(prev.cf.prev.total1+cal.period*2-1)))
)
test2 <-melt(100*as.matrix(subset(pred, select=(prev.prev.total1+cal.period):(prev.prev.total1+cal.period*2-1))))
View(test1$value-test2$value)
View(head(pred))
View(head(pred$prev.prev.total95))
View(head(pred$prev.cf.prev.total95))
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
View(inf.total)
View(head(sol))
source("Model_code/syph_model_main_code.R")
View(prev)
View(prev.cf)
View(prev.cf$prev.total)
View(prev$prev.total)
View(prev$prev.total-prev.cf$prev.total)
source("Model_code/syph_model_main_code.R")
source("Model_code/syph_model_main_code.R")
View(pred$prev)
View(pred$prev.cf)
View(prev$prev.total-prev.cf$prev.total)
View(pred$prev$prev.total-pred$prev.cf$prev.total)
View(pred$prev$prev.total-pred$prev.cf$prev.total)
View(pred$prev$prev.total-pred$prev.cf$prev.total)
View(pred$prev$prev.total-pred$prev.cf$prev.total)
View(pred$prev$prev.total)
View((pred$prev$prev.total-pred$prev.cf$prev.total)/pred$prev$prev.total)
View((pred$prev$prev.total-pred$prev.cf$prev.total)/pred$prev$prev.total)
source("Model_code/syph_model_main_code.R")
View(outputs$prev.prev.total1)
View(outputs["prev.prev.total1"])
View(subset(outputs, select=prev.prev.total1))
